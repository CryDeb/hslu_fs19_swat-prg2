sudo: false

language: java

jdk: openjdk11

before_deploy:
    - ./gradlew clean
    - ./gradlew sonarqube -Dsonar.projectKey=CryDeb_hslu_fs19_swat-prg2 -Dsonar.organization=crydeb-github -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=$SONAR_AUTH
    - ./gradlew jar

deploy:
    provider: releases
    api_key: $GIT_AUTH
    file_glob: true
    file: "build/libs/*"
    skip_cleanup: true
    prerelease: true
    name: Build $(date +'%d.%m.%Y %R')
    on:
        branch: master
        repo: CryDeb/hslu_fs19_swat-prg2
